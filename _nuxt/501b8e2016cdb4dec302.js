(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{518:function(e,t,r){"use strict";r.r(t);r(22),r(23),r(5),r(53),r(40);var n=r(15),c=r(20),o=r(28),l=r(27),h=r(26),f=r(19),d=r(17),v=r(54),m=r(67),y=r.n(m),_=r(443);function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(f.a)(e);if(t){var c=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(h.a)(this,r)}}var j=function(e,t,r,desc){var n,c=arguments.length,o=c<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(c<3?n(o):c>3?n(t,r,o):n(t,r))||o);return c>3&&o&&Object.defineProperty(t,r,o),o},k=function(e){Object(l.a)(f,e);var t,r,h=$(f);function f(){var e;return Object(c.a)(this,f),(e=h.apply(this,arguments)).image="",e.label="",e.description="",e.field="",e.map=[],e.result=[],e}return Object(o.a)(f,[{key:"watchTmp",value:function(){this.init()}},{key:"init",value:(r=Object(n.a)(regeneratorRuntime.mark((function e(){var t,r,n,c,data,o,l,h,i,map,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=this.$store).state.index){e.next=8;break}return r=this.$route.query.u,e.next=6,this.$searchUtils.createIndex(r);case 6:n=e.sent,this.$searchUtils.initStore(t,n);case 8:return this.field=this.$route.query.field,this.image="",this.label="",this.description="",this.result=[],c=this.$route.query.uri,e.next=16,this.api2(c);case 16:for(o in data=e.sent,this.image=data["schema:image"]?data["schema:image"][0]["@id"]:"",this.label=data["rdfs:label"]?data["rdfs:label"][0]["@value"]:"",data["schema:description"]&&data["schema:description"].length>0&&(this.description=data["schema:description"][0]["@value"]),data)if("schema:description"!==o&&"rdfs:label"!==o&&"@id"!==o&&"@context"!==o&&"schema:image"!==o&&"schema:name"!==o){for(l=[],h=data[o],i=0;i<h.length;i++)l.push(h[i]["@id"]);this.api(o,l)}for(f in this.api4(c),map=[],t.state.entity)map.push(f);this.map=map;case 26:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"head",value:function(){return{title:this.$t("entity")+" : "+this.$t(this.label)}}},{key:"mounted",value:function(){this.init()}},{key:"api2",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.$store.state.api,e.next=3,y.a.get(r).then((function(data){for(var e=data.data,i=0;i<e.length;i++){var r=e[i];if(r["@id"]===t)return r}}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"api",value:function(e,t){var r=this.$store.state.api,n=this;y.a.get(r).then((function(data){for(var r=data.data,map={},i=0;i<r.length;i++){var c=r[i];map[c["@id"]]=c}for(var o=[],l=0;l<t.length;l++){var h=map[t[l]];if(h){var f={_id:h["@id"],_source:{_label:[h["rdfs:label"][0]["@value"]]}};h["schema:image"]&&(f._source._thumbnail=[h["schema:image"][0]["@id"]]),h["schema:description"]&&(f._source._description=[h["schema:description"][0]["@value"]]),o.push(f)}}var d=map[t[0]];n.result.push({parent:d,property:e,children:o})}))}},{key:"api4",value:function(e){var t=this.$store.state.api,r=this;y.a.get(t).then((function(data){for(var t=data.data,map={},i=0;i<t.length;i++){var n=t[i];for(var c in n)for(var o=n[c],l=0;l<o.length;l++)if(o[l]["@id"]===e){var h={_id:n["@id"],_source:{_label:[n["rdfs:label"][0]["@value"]]}};n["schema:image"]&&(h._source._thumbnail=[n["schema:image"][0]["@id"]]),n["schema:description"]&&(h._source._description=[n["schema:description"][0]["@value"]]),map[c]||(map[c]={property:"is "+c+" of",children:[]}),map[c].children.push(h)}}for(var f in map)r.result.push(map[f])}))}},{key:"api3",value:function(e,t){var r=this.$store.state.api,n=this;y.a.get(r).then((function(data){for(var r=data.data,c=null,i=0;i<r.length;i++){var o=r[i];o["@id"]===t&&(c=o)}for(var l=[],h=0;h<r.length;h++){var f=r[h],d=f[e];if(d&&d.length>0&&d[0]["@id"]===t&&f["@id"]!==n.$route.query.uri){var v={_id:f["@id"],_source:{_thumbnail:[f["schema:image"][0]["@id"]],_label:[f["rdfs:label"][0]["@value"]],_description:[f["schema:description"][0]["@value"]]}};l.push(v)}}n.result.push({parent:c,children:l})}))}},{key:"getQuery",value:function(label){var e={u:this.$route.query.u};return e["fc-schema:subject"]=label,e}}]),f}(v.Vue);j([Object(v.Watch)("$route",{deep:!0})],k.prototype,"watchTmp",null);var w=k=j([Object(v.Component)({components:{HorizontalEntities:_.a}})],k),O=r(47),R=r(80),x=r.n(R),C=r(172),V=r(423),P=r(408),S=r(137),D=r(424),E=r(45),component=Object(O.a)(w,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-sheet",{attrs:{color:"grey lighten-3"}},[r("v-container",{staticClass:"py-4"},[r("h1",[e._v("\n        "+e._s(e.label)+"\n      ")])])],1),e._v(" "),r("v-container",[r("v-row",{staticClass:"pa-4 mb-5"},[r("v-col",{staticClass:"mb-4",attrs:{cols:"12",sm:"3"}},[r("v-img",{staticClass:"grey lighten-2",staticStyle:{height:"150px"},attrs:{src:e.image,contain:"",width:"100%"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"9"}},[r("p",[e._v(e._s(e.description))]),e._v(" "),r("p",[r("v-btn",{attrs:{color:"primary",to:e.localePath({name:"search",query:e.getQuery(e.label)})}},[e._v("\n            "+e._s(e.$t("search"))+"\n          ")])],1)])],1)],1),e._v(" "),r("v-container",{attrs:{fluid:""}},e._l(e.result,(function(t,n){return r("div",{key:n,attrs:{cols:"12",sm:"4"}},[r("h3",{staticClass:"my-4"},[e._v(e._s(t.property))]),e._v(" "),r("HorizontalEntities",{key:t.property,attrs:{data:t.children}})],1)})),0)],1)}),[],!1,null,null,null);t.default=component.exports;x()(component,{VBtn:C.a,VCol:V.a,VContainer:P.a,VImg:S.a,VRow:D.a,VSheet:E.a})}}]);